{% extends "admin_base.html" %}

{% block content %}
<div class="flex flex-col gap-8 text-gray-700">

    <!-- ğŸ§¾ THÃ”NG TIN NHÃ‚N VIÃŠN -->
    <div class="bg-white shadow-md rounded-xl p-6 space-y-4">
        <h2 class="text-2xl font-bold text-blue-700">ğŸ§¾ ThÃ´ng tin nhÃ¢n viÃªn</h2>

        <div>
            <h3 class="text-xl font-semibold text-gray-800">{{ staff.full_name or 'KhÃ´ng rÃµ' }}</h3>
            <p class="text-sm text-gray-500">MÃ£ nhÃ¢n viÃªn: <strong>#{{ staff.id }}</strong></p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-x-10 gap-y-3 text-sm">
            <div>
                <p><span class="font-semibold">ğŸ“‡ MÃ£ tháº»:</span> {{ staff.card_id or 'KhÃ´ng rÃµ' }}</p>
                <p><span class="font-semibold">ğŸ“ Äiá»‡n thoáº¡i:</span> {{ staff.phone or 'KhÃ´ng rÃµ' }}</p>
                <p><span class="font-semibold">âš¥ Giá»›i tÃ­nh:</span> {{ staff.gender or 'KhÃ´ng rÃµ' }}</p>
                <p><span class="font-semibold">ğŸ‚ NgÃ y sinh:</span> {{ staff.birthday or 'KhÃ´ng rÃµ' }}</p>
            </div>
            <div>
                <p><span class="font-semibold">âœ‰ï¸ Email:</span> {{ staff.email or 'KhÃ´ng rÃµ' }}</p>
                <p><span class="font-semibold">ğŸ” TÃ i khoáº£n ID:</span>
                    {{ staff.account_id.id if staff.account_id else 'KhÃ´ng cÃ³' }}
                </p>
                <p><span class="font-semibold">ğŸŸ¢ Tráº¡ng thÃ¡i nhÃ¢n viÃªn:</span>
                    <span
                        class="{{ 'text-green-600 font-semibold' if staff.is_active else 'text-red-500 font-semibold' }}">
                        {{ 'Äang hoáº¡t Ä‘á»™ng' if staff.is_active else 'Ngá»«ng hoáº¡t Ä‘á»™ng' }}
                    </span>
                </p>
            </div>
        </div>

        <div class="pt-4 flex justify-end">
            <a href="{{ url_for('staff.edit_staff', staff_id=staff.id) }}"
                class="inline-flex items-center px-5 py-2.5 bg-blue-600 text-white font-semibold rounded-xl hover:bg-blue-700 shadow">
                <i class="fas fa-user-edit mr-2"></i> Chá»‰nh sá»­a nhÃ¢n viÃªn
            </a>
        </div>
    </div>

    <!-- ğŸ” THÃ”NG TIN TÃ€I KHOáº¢N -->
    {% if staff.account_id %}
    <div class="bg-white shadow-md rounded-xl p-6 space-y-4">
        <h2 class="text-2xl font-bold text-green-700">ğŸ” ThÃ´ng tin tÃ i khoáº£n</h2>

        <ul class="space-y-2 text-sm">
            <li><span class="font-semibold">ğŸ‘¤ Username:</span> {{ staff.account_id.username }}</li>
            <li>
                <span class="font-semibold">ğŸ”‘ Máº­t kháº©u:</span>
                <span style="position: relative;">
                    <input id="passwordField" type="password" value="{{ staff.account_id.password or '********' }}"
                        class="border rounded px-2 py-1 text-sm text-gray-700 w-48" readonly />
                    <button type="button" onclick="togglePassword()"
                        style="position: absolute; right: 5px; top: 50%; transform: translateY(-50%);">
                        <i id="eyeIcon" class="fas fa-eye text-gray-600"></i>
                    </button>
                </span>
            </li>

            <li>
                <span class="font-semibold">ğŸŸ¢ Tráº¡ng thÃ¡i tÃ i khoáº£n:</span>
                <span
                    class="{{ 'text-green-600 font-semibold' if staff.account_id.is_active else 'text-red-500 font-semibold' }}">
                    {{ 'KÃ­ch hoáº¡t' if staff.account_id.is_active else 'Ngá»«ng hoáº¡t Ä‘á»™ng' }}
                </span>
            </li>
            {% if staff.account_id.created_at %}
            <li><span class="font-semibold">ğŸ“… NgÃ y táº¡o:</span> {{ staff.account_id.created_at.strftime('%d/%m/%Y') }}
            </li>
            {% endif %}
        </ul>

        <div class="pt-4 flex justify-end">
            <a href="{{ url_for('staff.edit_account_of_staff', staff_id=session['staff_id']) }}"
                class="inline-flex items-center px-5 py-2.5 bg-green-600 text-white font-semibold rounded-xl hover:bg-green-700 shadow">
                <i class="fas fa-user-cog mr-2"></i> Chá»‰nh sá»­a tÃ i khoáº£n
            </a>
        </div>
    </div>
    {% endif %}

</div>
<script>
    function togglePassword() {
        const input = document.getElementById("passwordField");
        const icon = document.getElementById("eyeIcon");

        if (input.type === "password") {
            input.type = "text";
            icon.classList.remove("fa-eye");
            icon.classList.add("fa-eye-slash");
        } else {
            input.type = "password";
            icon.classList.remove("fa-eye-slash");
            icon.classList.add("fa-eye");
        }
    }
</script>

<!-- Tailwind CDN vÃ  cáº¥u hÃ¬nh -->
<script src="https://cdn.tailwindcss.com"></script>
<script>
    tailwind.config = {
        theme: {
            extend: {
                fontFamily: {
                    sans: ['Inter', 'ui-sans-serif', 'system-ui'],
                },
                colors: {
                    primary: '#1e40af',
                },
            },
        },
    }
</script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
{% endblock %}